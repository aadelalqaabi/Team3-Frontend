{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport React, { useState, useEffect } from \"react\";\nimport tripStore from \"../stores/tripStore\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport Reinput from \"reinput\";\nimport authStore from \"../stores/authStore\";\nimport { baseURL } from \"../stores/instance\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function CreateScreen() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState({\n    title: \"\",\n    description: \"\",\n    image: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      trip = _useState4[0],\n      setTrip = _useState4[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== \"web\")) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== \"granted\") {\n                alert(\"Sorry, we need camera roll permissions to make this work!\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var pickImage = function _callee2() {\n    var result, filename, match, img_type;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [16, 9],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              filename = result.uri.split(\"/\").pop();\n              match = /\\.(\\w+)$/.exec(filename);\n              img_type = match ? \"image/\" + match[1] : \"image\";\n              setTrip(_objectSpread(_objectSpread({}, trip), {}, {\n                image: {\n                  uri: Platform.OS === \"android\" ? result.uri : result.uri.replace(\"file://\", \"\"),\n                  name: filename,\n                  type: img_type\n                }\n              }));\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleChangeTitle = function handleChangeTitle(text) {\n    setTrip(_objectSpread(_objectSpread({}, trip), {}, {\n      title: text\n    }));\n  };\n\n  var handleChangeDescription = function handleChangeDescription(text) {\n    setTrip(_objectSpread(_objectSpread({}, trip), {}, {\n      description: text\n    }));\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    tripStore.createTrip(trip);\n  };\n\n  return _jsx(View, {\n    style: {\n      flex: 1,\n      backgroundColor: \"#fffffc\"\n    },\n    children: _jsxs(SafeAreaView, {\n      style: {\n        flex: 1,\n        backgroundColor: \"#fffffc\",\n        marginTop: 70,\n        margin: 20,\n        height: \"100%\"\n      },\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"Create a trip\"\n      }), _jsxs(View, {\n        style: {\n          paddingBottom: 30\n        },\n        children: [image === null ? _jsx(Button, {\n          title: \"Choose an image\",\n          onPress: pickImage\n        }) : _jsx(_Fragment, {}), image && _jsxs(View, {\n          children: [_jsx(Image, {\n            source: {\n              uri: image\n            },\n            style: {\n              alignSelf: \"center\",\n              width: 384,\n              height: 216,\n              borderRadius: 20,\n              margin: 10,\n              shadowOpacity: 0.8,\n              shadowRadius: 4,\n              shadowColor: \"black\",\n              shadowOffset: {\n                height: 0,\n                width: 0\n              },\n              elevation: 1\n            }\n          }), _jsx(Button, {\n            title: \"Choose another image \",\n            onPress: pickImage\n          })]\n        })]\n      }), _jsx(Reinput, {\n        label: \"Title\",\n        placeholder: \"Type here...\",\n        onChangeText: handleChangeTitle\n      }), _jsx(Reinput, {\n        label: \"Description\",\n        placeholder: \"Type here...\",\n        onChangeText: handleChangeDescription\n      }), _jsx(Button, {\n        title: \"Submit\",\n        onPress: handleSubmit\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10\n  },\n  title: {\n    marginTop: 10,\n    marginBottom: 40,\n    fontSize: 22,\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","tripStore","ImagePicker","Reinput","authStore","baseURL","CreateScreen","image","setImage","title","description","trip","setTrip","Platform","OS","requestMediaLibraryPermissionsAsync","status","alert","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","filename","uri","split","pop","match","exec","img_type","replace","name","type","handleChangeTitle","text","handleChangeDescription","handleSubmit","event","createTrip","flex","backgroundColor","marginTop","margin","height","styles","paddingBottom","alignSelf","width","borderRadius","shadowOpacity","shadowRadius","shadowColor","shadowOffset","elevation","StyleSheet","create","input","borderWidth","padding","marginBottom","fontSize","fontWeight"],"sources":["/Users/adool998/Development/react-native/team3/Team3-Frontend/Team3/screens/CreateScreen.js"],"sourcesContent":["import {\n  StyleSheet,\n  SafeAreaView,\n  TextInput,\n  Text,\n  Button,\n  Platform,\n  View,\n  Image,\n} from \"react-native\";\nimport React, { useState, useEffect } from \"react\";\nimport tripStore from \"../stores/tripStore\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport Reinput from \"reinput\";\nimport authStore from \"../stores/authStore\";\nimport { baseURL } from \"../stores/instance\";\n\nexport function CreateScreen() {\n  const [image, setImage] = useState(null);\n  const [trip, setTrip] = useState({\n    title: \"\",\n    description: \"\",\n    image: \"\",\n  });\n\n  useEffect(() => {\n    (async () => {\n      if (Platform.OS !== \"web\") {\n        const { status } =\n          await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== \"granted\") {\n          alert(\"Sorry, we need camera roll permissions to make this work!\");\n        }\n      }\n    })();\n  }, []);\n\n  const pickImage = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [16, 9],\n      quality: 1,\n    });\n\n    if (!result.cancelled) {\n      let filename = result.uri.split(\"/\").pop();\n      let match = /\\.(\\w+)$/.exec(filename);\n      let img_type = match ? `image/${match[1]}` : `image`;\n      setTrip({\n        ...trip,\n        image: {\n          uri:\n            Platform.OS === \"android\"\n              ? result.uri\n              : result.uri.replace(\"file://\", \"\"),\n          name: filename,\n          type: img_type,\n        },\n      });\n      setImage(result.uri);\n    }\n  };\n\n  const handleChangeTitle = (text) => {\n    setTrip({\n      ...trip,\n      title: text,\n    });\n  };\n  const handleChangeDescription = (text) => {\n    setTrip({\n      ...trip,\n      description: text,\n    });\n  };\n\n  const handleSubmit = (event) => {\n    tripStore.createTrip(trip);\n  };\n\n  return (\n    <View style={{ flex: 1, backgroundColor: \"#fffffc\" }}>\n      <SafeAreaView\n        style={{\n          flex: 1,\n          backgroundColor: \"#fffffc\",\n          marginTop: 70,\n          margin: 20,\n          height: \"100%\",\n        }}\n      >\n        <Text style={styles.title}>Create a trip</Text>\n        <View style={{ paddingBottom: 30 }}>\n          {image === null ? (\n            <Button title=\"Choose an image\" onPress={pickImage} />\n          ) : (\n            <></>\n          )}\n\n          {image && (\n            <View>\n              <Image\n                source={{ uri: image }}\n                style={{\n                  alignSelf: \"center\",\n                  width: 384,\n                  height: 216,\n                  borderRadius: 20,\n                  margin: 10,\n                  shadowOpacity: 0.8,\n                  shadowRadius: 4,\n                  shadowColor: \"black\",\n                  shadowOffset: {\n                    height: 0,\n                    width: 0,\n                  },\n                  elevation: 1,\n                }}\n              />\n              <Button title=\"Choose another image \" onPress={pickImage} />\n            </View>\n          )}\n        </View>\n        <Reinput\n          label=\"Title\"\n          placeholder=\"Type here...\"\n          onChangeText={handleChangeTitle}\n        />\n        <Reinput\n          label=\"Description\"\n          placeholder=\"Type here...\"\n          onChangeText={handleChangeDescription}\n        />\n\n        <Button title=\"Submit\" onPress={handleSubmit} />\n      </SafeAreaView>\n    </View>\n  );\n}\nconst styles = StyleSheet.create({\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n  },\n  title: {\n    marginTop: 10,\n    marginBottom: 40,\n    fontSize: 22,\n    fontWeight: \"bold\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}